{% extends 'base.html.twig' %}

{% block title %}Accueil / Twitter{% endblock %}

{% block stylesheets %}
	{{parent()}}
{% endblock %}

{% block javascripts %}
	{{parent()}}
{% endblock %}

{% block body %}
	{# Inclusion de la sidebar de gauche  #}
  	{% include "_twitter_layout_left.html.twig" %}
	<div class="write-twit">
		{{ form_start(addPost) }}

		{{ form_row(addPost.title) }}

        <div class="picture-text">
            <img class="user-img-40" src="{{ post.user.img|default('https://avatars.dicebear.com/api/pixel-art/' ~ random() ~'.svg') }}" />
			{{ form_row(addPost.content) }}
        </div>
		
		<div class="input-group mb-3">
  			<div class="input-group-prepend">
    			<span class="input-group-text" id="basic-addon1"><label for="post_picture"><i class="fa-solid fa-upload"></i></label></span>
  			</div>
			{{ form_row(addPost.picture) }}
			</div>
		<div class="button-add-tweet">
        	<button type="submit" class="add-tweet">Tweeter</button>
		</div>
	{{ form_end(addPost) }}
	</div>
	
	{% for post in posts %}
		<div class="tw-block-parent">
		<div class="timeline-TweetList-tweet">
			<div class="timeline-Tweet">
				<div class="timeline-Tweet-brand">
					<div class="Icon Icon--twitter"></div>
				</div>
				<div class="timeline-Tweet-author">
					<div class="TweetAuthor"><a class="TweetAuthor-link" href="#channel"> </a><span class="TweetAuthor-avatar"> 
							<div class="Avatar"> </div></span><span class="TweetAuthor-name">{{post.user.username}} </span> <span class="Icon Icon--verified"> </span><span class="TweetAuthor-screenName">@{{post.user.username}} </span></div>
				</div>
				<div class="timeline-Tweet-text">{{post.content}}</div>
				{% if post.picture is null %}
	
				{% else %}
					<img src="{{images ~ post.picture}}" class="picture-post"/>
				{% endif %}

				<div class="timeline-Tweet-metadata"><span class="timeline-Tweet-timestamp">{{post.createdAt|date('d M Y H:i:s')}}</span></div>
				<ul class="timeline-Tweet-actions">
					<li class="timeline-Tweet-action"><a class="fa-regular fa-heart" href="#"></a></li>
					<li class="timeline-Tweet-action"><a class="fa-solid fa-reply" href="{{ path('show_post', {'id': post.id}) }}"></a></li>
				</ul>
			</div>
		</div>
	</div>
	{% endfor %}

	{# Inclusion de la sidebar de droite  #}
  {% include "_twitter_layout_right.html.twig" %}

{% endblock %}
